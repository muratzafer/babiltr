@model X.PagedList.IPagedList<babiltr.EntityLayer.Blog>
@{
    ViewData["Title"] = "Tüm Bloglar";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!doctype html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bloglar - BabilTR</title>
    <meta name="description" content="En son haberler ve blog yazıları" />
    <meta name="keywords" content="Blog, Haber, Çeviri, Çevirmen" />
    <meta name="author" content="BabilTR" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

</head>

<body>
    <!-- Başlangıç -->
    <section class="bg-half-170 d-table w-100" style="background: url('/thema/jobnova_v1.0.1/html/images/hero/bg.jpg');">
        <div class="bg-overlay bg-gradient-overlay"></div>
        <div class="shooting-stars">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
            <span></span>
            <span></span>
            <span></span>
            <span></span>
            <span></span>
            <span></span>
        </div>
        <div class="container">
            <div class="row mt-5 justify-content-center">
                <div class="col-12">
                    <div class="title-heading text-center">
                        <p class="text-white-50 para-desc mx-auto mb-0">Son Haberler</p>
                        <h5 class="heading fw-semibold mb-0 sub-heading text-white title-dark">Bloglar ve Haberler</h5>
                    </div>
                </div><!--end col-->
            </div><!--end row-->
        </div><!--end container-->
    </section>
    <div class="position-relative">
        <div class="shape overflow-hidden text-white">
            <svg viewBox="0 0 2880 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 48H1437.5H2880V0H2160C1442.5 52 720 0 720 0H0V48Z" fill="currentColor"></path>
            </svg>
        </div>
    </div>
    <!-- Başlangıç Bitiş -->
    <!-- Bloglar Başlangıç -->
    <section class="section">
        <div class="container">
            <div class="row g-4">
                @foreach (var blog in Model)
                {
                    <div class="col-lg-4 col-md-6">
                        <div class="card blog blog-primary shadow rounded overflow-hidden border-0">
                            <div class="card-img blog-image position-relative overflow-hidden rounded-0">
                                <img src="/images/blogpictures/@blog.ImageName" class="img-fluid" alt="@blog.Title">

                                @if (User.IsInRole("admin"))
                                {
                                    <form action="/Blog/BlogDelete/@blog.Id" style="position: absolute; top: 10px; right: 10px;">
                                        <input type="hidden" name="BlogId" value="@blog.Id" />
                                        <button type="submit" class="btn btn-outline-danger btn-sm" onclick="return confirm('Bu blogu silmek istediğinizden emin misiniz? Bu işlem geri alınamaz.');">
                                            <i class="bi bi-trash"></i>
                                        </button>
                                    </form>
                                }
                            </div>

                            <div class="card-body blog-content position-relative p-0">
                                <div class="blog-tag px-4">
                                    @if (!string.IsNullOrEmpty(blog.Tags))
                                    {
                                        var tags = blog.Tags.Split(',');
                                        var limitedTags = tags.Take(2);
                                        foreach (var tag in limitedTags)
                                        {
                                            <a href="#" class="badge bg-primary rounded-pill">@tag.Trim()</a>
                                        }
                                    }
                                </div>
                                <div class="p-4">
                                    <ul class="list-unstyled text-muted small mb-2">
                                        <li class="d-inline-flex align-items-center me-2"><i data-feather="calendar" class="fea icon-ex-sm me-1 text-dark"></i>@blog.CreatedAt.ToString("dd MMMM yyyy")</li>
                                        <li class="d-inline-flex align-items-center"><i data-feather="clock" class="fea icon-ex-sm me-1 text-dark"></i> @blog.ReadTime dakika</li>
                                    </ul>

                                    <a href="/Blog/BlogDetails/@blog.Id" class="title fw-semibold fs-5 text-dark">@blog.Title</a>

                                    <ul class="list-unstyled d-flex justify-content-between align-items-center text-muted mb-0 mt-3">
                                        <li class="list-inline-item me-2"><a href="/Blog/BlogDetails/@blog.Id" class="btn btn-link primary text-dark">Şimdi Oku <i class="mdi mdi-arrow-right"></i></a></li>
                                        <li class="list-inline-item"><span class="text-dark">Yazar:</span> <a href="#" class="text-muted link-title">@blog.Author</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!--end col-->
                }
            </div><!--end row-->

            <div class="row">
                <div class="col-12 mt-4 pt-2">
                    <ul class="pagination justify-content-center mb-0">
                        @if (Model.HasPreviousPage)
                        {
                            <li class="page-item">
                                <a class="page-link" href="@Url.Action("AllBlogs", new { page = Model.PageNumber - 1 })" aria-label="Previous">
                                    <span aria-hidden="true"><i class="mdi mdi-chevron-left fs-6"></i></span>
                                </a>
                            </li>
                        }
                        else
                        {
                            <li class="page-item disabled">
                                <a class="page-link" aria-label="Previous">
                                    <span aria-hidden="true"><i class="mdi mdi-chevron-left fs-6"></i></span>
                                </a>
                            </li>
                        }

                        @for (int i = 1; i <= Model.PageCount; i++)
                        {
                            if (i == Model.PageNumber)
                            {
                                <li class="page-item active"><a class="page-link" href="#">@i</a></li>
                            }
                            else
                            {
                                <li class="page-item"><a class="page-link" href="@Url.Action("AllBlogs", new { page = i })">@i</a></li>
                            }
                        }

                        @if (Model.HasNextPage)
                        {
                            <li class="page-item">
                                <a class="page-link" href="@Url.Action("AllBlogs", new { page = Model.PageNumber + 1 })" aria-label="Next">
                                    <span aria-hidden="true"><i class="mdi mdi-chevron-right fs-6"></i></span>
                                </a>
                            </li>
                        }
                        else
                        {
                            <li class="page-item disabled">
                                <a class="page-link" aria-label="Next">
                                    <span aria-hidden="true"><i class="mdi mdi-chevron-right fs-6"></i></span>
                                </a>
                            </li>
                        }
                    </ul>
                </div><!--end col-->
            </div><!--end row-->
        </div><!--end container-->
    </section>
    <!-- Bloglar Bitiş -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const stars = document.querySelectorAll(".shooting-stars span");
            stars.forEach(star => {
                star.style.setProperty('--random-x', Math.random());
                star.style.setProperty('--random-y', Math.random());
            });
        });
    </script>
</body>
</html>